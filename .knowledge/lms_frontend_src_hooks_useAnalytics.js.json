{"is_source_file": true, "format": "JavaScript", "description": "This file defines a React custom hook 'useAnalytics' that provides functions to track analytics events such as page views, course enrollments, and lesson completions. It includes logic for sanitizing payloads, emitting events to the console, and sending events to an optional external endpoint.", "external_files": ["./useAuth", "../lib/logger"], "external_methods": ["useAuth", "logger.info", "logger.warn"], "published": ["useAnalytics"], "classes": [], "methods": [{"name": "useAnalytics()", "description": "Main hook that returns functions for tracking events and page views.", "scope": "", "scopeKind": ""}, {"name": "trackEvent", "description": "Function to emit analytics events with an event name and optional payload."}, {"name": "trackPageView", "description": "Convenience function to send a 'page_view' event with provided metadata."}], "calls": ["useAuth", "logger.info", "logger.warn", "fetch"], "search-terms": ["useAnalytics", "event tracking hook", "React custom hook", "analytics events", "page_view", "course_enroll", "lesson_complete"], "state": 2, "file_id": 62, "knowledge_revision": 157, "git_revision": "", "ctags": [{"_type": "tag", "name": "body", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/hooks/useAnalytics.js", "pattern": "/^    const body = {$/", "language": "JavaScript", "kind": "class", "scope": "useAnalytics", "scopeKind": "class"}, {"_type": "tag", "name": "event", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/hooks/useAnalytics.js", "pattern": "/^      event: eventName,$/", "language": "JavaScript", "kind": "property", "scope": "useAnalytics.body", "scopeKind": "class"}, {"_type": "tag", "name": "event", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/hooks/useAnalytics.js", "pattern": "/^      event: eventName,$/", "language": "JavaScript", "kind": "property", "scope": "useAnalytics.event", "scopeKind": "class"}, {"_type": "tag", "name": "event", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/hooks/useAnalytics.js", "pattern": "/^    const event = {$/", "language": "JavaScript", "kind": "class", "scope": "useAnalytics", "scopeKind": "class"}, {"_type": "tag", "name": "metadata", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/hooks/useAnalytics.js", "pattern": "/^      metadata: sanitize(payload),$/", "language": "JavaScript", "kind": "property", "scope": "useAnalytics.body", "scopeKind": "class"}, {"_type": "tag", "name": "metadata", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/hooks/useAnalytics.js", "pattern": "/^      metadata: sanitize(payload),$/", "language": "JavaScript", "kind": "property", "scope": "useAnalytics.event", "scopeKind": "class"}, {"_type": "tag", "name": "timestamp", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/hooks/useAnalytics.js", "pattern": "/^      timestamp: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "useAnalytics.body", "scopeKind": "class"}, {"_type": "tag", "name": "timestamp", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/hooks/useAnalytics.js", "pattern": "/^      timestamp: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "useAnalytics.event", "scopeKind": "class"}, {"_type": "tag", "name": "useAnalytics", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/hooks/useAnalytics.js", "pattern": "/^export function useAnalytics() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/hooks/useAnalytics.js", "pattern": "/^      userId: user?.id || null,$/", "language": "JavaScript", "kind": "property", "scope": "useAnalytics.body", "scopeKind": "class"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/hooks/useAnalytics.js", "pattern": "/^      userId: user?.id || null,$/", "language": "JavaScript", "kind": "property", "scope": "useAnalytics.event", "scopeKind": "class"}], "hash": "76f1a91f84bf7aca725db9d426cde2ee", "format-version": 4, "code-base-name": "lms_frontend", "filename": "lms_frontend/src/hooks/useAnalytics.js", "fields": [{"name": "event: eventName,", "scope": "useAnalytics.body", "scopeKind": "class", "description": "unavailable"}, {"name": "metadata: sanitize(payload),", "scope": "useAnalytics.body", "scopeKind": "class", "description": "unavailable"}, {"name": "timestamp: new Date().toISOString(),", "scope": "useAnalytics.body", "scopeKind": "class", "description": "unavailable"}, {"name": "userId: user?.id || null,", "scope": "useAnalytics.body", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"157": ""}]}