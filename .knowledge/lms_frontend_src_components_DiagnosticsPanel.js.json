{"is_source_file": true, "format": "JavaScript", "description": "This file defines a React component called DiagnosticsPanel that provides a frontend diagnostics interface for verifying Supabase environment, connectivity, database access, and user session status.", "external_files": ["../config/supabaseClient"], "external_methods": ["supabase.auth.getSession()"], "published": ["DiagnosticsPanel"], "classes": [], "methods": [{"name": "maskValue(value, visible = 4)", "description": "Masks a string value for sensitive display, showing only the first few and last two characters.", "scope": "", "scopeKind": ""}, {"name": "getMaskedEnv()", "description": "Fetches specified environment variables and returns their masked representations along with presence status.", "scope": "", "scopeKind": ""}, {"name": "checkNetwork(url)", "description": "Performs a network reachability test to the Supabase URL using fetch, preferring HEAD and falling back to GET.", "scope": "", "scopeKind": ""}, {"name": "probeDatabase()", "description": "Performs a lightweight check to verify database connectivity via Supabase's REST API and auth settings.", "scope": "", "scopeKind": ""}, {"name": "checkAuthSession()", "description": "Checks the current user session and masks sensitive tokens for display.", "scope": "", "scopeKind": ""}, {"name": "DiagnosticsPanel()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch()", "supabase.auth.getSession()"], "search-terms": ["DiagnosticsPanel", "supabase", "environment check", "database probe", "network reachability", "auth session", "React", "supabaseClient"], "state": 2, "file_id": 73, "knowledge_revision": 209, "git_revision": "", "revision_history": [{"206": ""}, {"209": ""}], "ctags": [{"_type": "tag", "name": "Badge", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^const Badge = ({ ok, label }) => ($/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "DiagnosticsPanel", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^export default function DiagnosticsPanel() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "REQUIRED_ENV_KEYS", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^const REQUIRED_ENV_KEYS = [$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "Section", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^const Section = ({ title, children }) => ($/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "access_token_masked", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^      access_token_masked: sess.access_token ? maskValue(sess.access_token, 6) : null,$/", "language": "JavaScript", "kind": "property", "scope": "checkAuthSession.masked", "scopeKind": "class"}, {"_type": "tag", "name": "allEnvPresent", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^        <Badge ok={allEnvPresent} label={allEnvPresent ? 'Env OK' : 'Env Missing'} \\/>$/", "language": "JavaScript", "kind": "field", "scope": "AnonymousClass527312710401", "scopeKind": "class"}, {"_type": "tag", "name": "auth", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^            disabled={auth.loading}$/", "language": "JavaScript", "kind": "field", "scope": "disabled", "scopeKind": "class"}, {"_type": "tag", "name": "checkAuthSession", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^async function checkAuthSession() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "checkNetwork", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^async function checkNetwork(url) {$/", "language": "JavaScript", "kind": "function", "signature": "(url)"}, {"_type": "tag", "name": "db", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^            disabled={db.loading}$/", "language": "JavaScript", "kind": "field", "scope": "disabled", "scopeKind": "class"}, {"_type": "tag", "name": "expires_at", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^      expires_at: sess.expires_at || null,$/", "language": "JavaScript", "kind": "property", "scope": "checkAuthSession.masked", "scopeKind": "class"}, {"_type": "tag", "name": "getMaskedEnv", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^function getMaskedEnv() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "maskValue", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^function maskValue(value, visible = 4) {$/", "language": "JavaScript", "kind": "function", "signature": "(value, visible = 4)"}, {"_type": "tag", "name": "masked", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^    const masked = {$/", "language": "JavaScript", "kind": "class", "scope": "checkAuthSession", "scopeKind": "class"}, {"_type": "tag", "name": "ok", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^const Badge = ({ ok, label }) => ($/", "language": "JavaScript", "kind": "field", "scope": "Badge", "scopeKind": "class"}, {"_type": "tag", "name": "probeDatabase", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^async function probeDatabase() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "provider_token_present", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^      provider_token_present: !!sess.provider_token,$/", "language": "JavaScript", "kind": "property", "scope": "checkAuthSession.masked", "scopeKind": "class"}, {"_type": "tag", "name": "refresh_token_masked", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^      refresh_token_masked: sess.refresh_token ? maskValue(sess.refresh_token, 6) : null,$/", "language": "JavaScript", "kind": "property", "scope": "checkAuthSession.masked", "scopeKind": "class"}, {"_type": "tag", "name": "runAuthCheck", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^            onClick={runAuthCheck}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "runDbProbe", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^            onClick={runDbProbe}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "runEnvCheck", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^              onClick={runEnvCheck}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "runNetworkCheck", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^            onClick={runNetworkCheck}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^const Section = ({ title, children }) => ($/", "language": "JavaScript", "kind": "field", "scope": "Section", "scopeKind": "class"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^      userId: sess.user?.id || null,$/", "language": "JavaScript", "kind": "property", "scope": "checkAuthSession.masked", "scopeKind": "class"}], "hash": "6d2fa7d68b01cb802741eb53b86348dd", "format-version": 4, "code-base-name": "lms_frontend", "filename": "lms_frontend/src/components/DiagnosticsPanel.js", "fields": [{"name": "access_token_masked: sess.access_token ? maskValue(sess.access_token, 6) : null,", "scope": "checkAuthSession.masked", "scopeKind": "class", "description": "unavailable"}, {"name": "<Badge ok={allEnvPresent} label={allEnvPresent ? 'Env OK' : 'Env Missing'} \\/>", "scope": "AnonymousClass527312710401", "scopeKind": "class", "description": "unavailable"}, {"name": "disabled={auth.loading}", "scope": "disabled", "scopeKind": "class", "description": "unavailable"}, {"name": "disabled={db.loading}", "scope": "disabled", "scopeKind": "class", "description": "unavailable"}, {"name": "expires_at: sess.expires_at || null,", "scope": "checkAuthSession.masked", "scopeKind": "class", "description": "unavailable"}, {"name": "const Badge = ({ ok, label }) => (", "scope": "Badge", "scopeKind": "class", "description": "unavailable"}, {"name": "provider_token_present: !!sess.provider_token,", "scope": "checkAuthSession.masked", "scopeKind": "class", "description": "unavailable"}, {"name": "refresh_token_masked: sess.refresh_token ? maskValue(sess.refresh_token, 6) : null,", "scope": "checkAuthSession.masked", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={runAuthCheck}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={runDbProbe}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={runEnvCheck}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={runNetworkCheck}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "const Section = ({ title, children }) => (", "scope": "Section", "scopeKind": "class", "description": "unavailable"}, {"name": "userId: sess.user?.id || null,", "scope": "checkAuthSession.masked", "scopeKind": "class", "description": "unavailable"}]}