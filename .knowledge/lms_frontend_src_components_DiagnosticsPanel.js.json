{"is_source_file": true, "format": "JavaScript (React JSX)", "description": "This file defines a React component named DiagnosticsPanel that provides a frontend UI for performing various diagnostic checks on the Supabase setup. It includes environment variable validation, network reachability tests, database connectivity probes, and session information. The component manages its state and performs asynchronously triggered diagnostic functions, displaying results with visual indicators.", "external_files": ["../config/supabaseClient"], "external_methods": ["getSupabaseClient"], "published": ["DiagnosticsPanel"], "classes": [], "methods": [{"name": "maskValue(value, visible = 4)", "description": "Masks sensitive values, showing only a specified number of visible characters at the start and end.", "scope": "", "scopeKind": ""}, {"name": "getMaskedEnv()", "description": "Retrieves and masks the required environment variables for display, indicating presence and showing masked values.", "scope": "", "scopeKind": ""}, {"name": "checkNetwork(url)", "description": "Checks network connectivity to the provided URL using HEAD or GET requests.", "scope": "", "scopeKind": ""}, {"name": "probeDatabase()", "description": "Performs a lightweight probe of the Supabase database endpoint to verify connectivity and authorization.", "scope": "", "scopeKind": ""}, {"name": "checkAuthSession()", "description": "Checks the current Supabase auth session, returning masked token information if a session exists.", "scope": "", "scopeKind": ""}, {"name": "DiagnosticsPanel()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch", "getSupabaseClient", "supabase.auth.getSession"], "search-terms": ["DiagnosticsPanel", "Supabase diagnostics", "environment validation", "network reachability", "database probe", "auth session", "React component", "supabaseClient"], "state": 2, "file_id": 73, "knowledge_revision": 214, "git_revision": "888b5ac9f87ac07c46219f8aa7942b7f492b2d41", "revision_history": [{"206": ""}, {"209": ""}, {"210": "888b5ac9f87ac07c46219f8aa7942b7f492b2d41"}, {"213": "888b5ac9f87ac07c46219f8aa7942b7f492b2d41"}, {"214": "888b5ac9f87ac07c46219f8aa7942b7f492b2d41"}], "ctags": [{"_type": "tag", "name": "Badge", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^const Badge = ({ ok, label }) => ($/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "DiagnosticsPanel", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^export default function DiagnosticsPanel() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "REQUIRED_ENV_KEYS", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^const REQUIRED_ENV_KEYS = [$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "Section", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^const Section = ({ title, children }) => ($/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "access_token_masked", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^      access_token_masked: sess.access_token ? maskValue(sess.access_token, 6) : null,$/", "language": "JavaScript", "kind": "property", "scope": "checkAuthSession.masked", "scopeKind": "class"}, {"_type": "tag", "name": "allEnvPresent", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^          <Badge ok={allEnvPresent} label={allEnvPresent ? 'Env OK' : 'Env Missing'} \\/>$/", "language": "JavaScript", "kind": "field", "scope": "AnonymousClass527312710501", "scopeKind": "class"}, {"_type": "tag", "name": "auth", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^            disabled={auth.loading}$/", "language": "JavaScript", "kind": "field", "scope": "disabled", "scopeKind": "class"}, {"_type": "tag", "name": "checkAuthSession", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^async function checkAuthSession() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "checkNetwork", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^async function checkNetwork(url) {$/", "language": "JavaScript", "kind": "function", "signature": "(url)"}, {"_type": "tag", "name": "db", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^            disabled={db.loading}$/", "language": "JavaScript", "kind": "field", "scope": "disabled", "scopeKind": "class"}, {"_type": "tag", "name": "expires_at", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^      expires_at: sess.expires_at || null,$/", "language": "JavaScript", "kind": "property", "scope": "checkAuthSession.masked", "scopeKind": "class"}, {"_type": "tag", "name": "getMaskedEnv", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^function getMaskedEnv() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "maskValue", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^function maskValue(value, visible = 4) {$/", "language": "JavaScript", "kind": "function", "signature": "(value, visible = 4)"}, {"_type": "tag", "name": "masked", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^    const masked = {$/", "language": "JavaScript", "kind": "class", "scope": "checkAuthSession", "scopeKind": "class"}, {"_type": "tag", "name": "ok", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^const Badge = ({ ok, label }) => ($/", "language": "JavaScript", "kind": "field", "scope": "Badge", "scopeKind": "class"}, {"_type": "tag", "name": "probeDatabase", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^async function probeDatabase() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "provider_token_present", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^      provider_token_present: !!sess.provider_token,$/", "language": "JavaScript", "kind": "property", "scope": "checkAuthSession.masked", "scopeKind": "class"}, {"_type": "tag", "name": "refresh_token_masked", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^      refresh_token_masked: sess.refresh_token ? maskValue(sess.refresh_token, 6) : null,$/", "language": "JavaScript", "kind": "property", "scope": "checkAuthSession.masked", "scopeKind": "class"}, {"_type": "tag", "name": "runAll", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^            onClick={runAll}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "runAuthCheck", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^            onClick={runAuthCheck}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "runDbProbe", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^            onClick={runDbProbe}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "runEnvCheck", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^              onClick={runEnvCheck}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "runNetworkCheck", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^            onClick={runNetworkCheck}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "runningAll", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^            disabled={runningAll}$/", "language": "JavaScript", "kind": "field", "scope": "disabled", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^const Section = ({ title, children }) => ($/", "language": "JavaScript", "kind": "field", "scope": "Section", "scopeKind": "class"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^      userId: sess.user?.id || null,$/", "language": "JavaScript", "kind": "property", "scope": "checkAuthSession.masked", "scopeKind": "class"}], "hash": "db20b44c68e9e9e64c19ac9a56e17010", "format-version": 4, "code-base-name": "lms_frontend", "filename": "lms_frontend/src/components/DiagnosticsPanel.js", "fields": [{"name": "access_token_masked: sess.access_token ? maskValue(sess.access_token, 6) : null,", "scope": "checkAuthSession.masked", "scopeKind": "class", "description": "unavailable"}, {"name": "<Badge ok={allEnvPresent} label={allEnvPresent ? 'Env OK' : 'Env Missing'} \\/>", "scope": "AnonymousClass527312710501", "scopeKind": "class", "description": "unavailable"}, {"name": "disabled={auth.loading}", "scope": "disabled", "scopeKind": "class", "description": "unavailable"}, {"name": "disabled={db.loading}", "scope": "disabled", "scopeKind": "class", "description": "unavailable"}, {"name": "expires_at: sess.expires_at || null,", "scope": "checkAuthSession.masked", "scopeKind": "class", "description": "unavailable"}, {"name": "const Badge = ({ ok, label }) => (", "scope": "Badge", "scopeKind": "class", "description": "unavailable"}, {"name": "provider_token_present: !!sess.provider_token,", "scope": "checkAuthSession.masked", "scopeKind": "class", "description": "unavailable"}, {"name": "refresh_token_masked: sess.refresh_token ? maskValue(sess.refresh_token, 6) : null,", "scope": "checkAuthSession.masked", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={runAll}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={runAuthCheck}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={runDbProbe}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={runEnvCheck}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={runNetworkCheck}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "disabled={runningAll}", "scope": "disabled", "scopeKind": "class", "description": "unavailable"}, {"name": "const Section = ({ title, children }) => (", "scope": "Section", "scopeKind": "class", "description": "unavailable"}, {"name": "userId: sess.user?.id || null,", "scope": "checkAuthSession.masked", "scopeKind": "class", "description": "unavailable"}]}