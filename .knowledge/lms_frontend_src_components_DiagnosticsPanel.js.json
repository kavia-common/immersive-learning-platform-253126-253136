{"is_source_file": true, "format": "JavaScript (React)", "description": "A React component named DiagnosticsPanel that provides frontend-based diagnostics for a Supabase setup. It checks environment variables, network reachability, database accessibility via REST, and user session info, displaying masked secrets and statuses.", "external_files": ["../config/supabaseClient"], "external_methods": ["getSupabaseClient()"], "published": ["default"], "classes": [{"name": "Section", "description": "A React functional component that renders a styled section container with a title and children elements."}, {"name": "Badge", "description": "A React functional component that displays a colored badge indicating success or failure status."}], "methods": [{"name": "maskValue(value, visible = 4)", "description": "Masks a string value, showing only the first few characters and last two characters, masking the middle part.", "scope": "", "scopeKind": ""}, {"name": "getMaskedEnv()", "description": "Retrieves specified environment variables and returns an array with their masked values and presence status.", "scope": "", "scopeKind": ""}, {"name": "checkNetwork(url)", "description": "Performs a network check to verify reachability of the provided URL, trying HEAD request first, then fallback GET.", "scope": "", "scopeKind": ""}, {"name": "probeDatabase()", "description": "Attempts to verify database accessibility via Supabase client by trying auth and REST API call.", "scope": "", "scopeKind": ""}, {"name": "checkAuthSession()", "description": "Checks current Supabase auth session, returning masked tokens and session info if available.", "scope": "", "scopeKind": ""}, {"name": "DiagnosticsPanel()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getSupabaseClient()", "fetch()", "supabase.auth.getSession()"], "search-terms": ["DiagnosticsPanel", "Supabase diagnostics", "environment variable check", "network reachability", "database REST probe", "auth session check", "supabaseClient import", "maskValue function", "Session info display"], "state": 2, "file_id": 73, "knowledge_revision": 210, "git_revision": "888b5ac9f87ac07c46219f8aa7942b7f492b2d41", "revision_history": [{"206": ""}, {"209": ""}, {"210": "888b5ac9f87ac07c46219f8aa7942b7f492b2d41"}], "ctags": [{"_type": "tag", "name": "Badge", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^const Badge = ({ ok, label }) => ($/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "DiagnosticsPanel", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^export default function DiagnosticsPanel() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "REQUIRED_ENV_KEYS", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^const REQUIRED_ENV_KEYS = [$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "Section", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^const Section = ({ title, children }) => ($/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "access_token_masked", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^      access_token_masked: sess.access_token ? maskValue(sess.access_token, 6) : null,$/", "language": "JavaScript", "kind": "property", "scope": "checkAuthSession.masked", "scopeKind": "class"}, {"_type": "tag", "name": "allEnvPresent", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^        <Badge ok={allEnvPresent} label={allEnvPresent ? 'Env OK' : 'Env Missing'} \\/>$/", "language": "JavaScript", "kind": "field", "scope": "AnonymousClass527312710401", "scopeKind": "class"}, {"_type": "tag", "name": "auth", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^            disabled={auth.loading}$/", "language": "JavaScript", "kind": "field", "scope": "disabled", "scopeKind": "class"}, {"_type": "tag", "name": "checkAuthSession", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^async function checkAuthSession() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "checkNetwork", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^async function checkNetwork(url) {$/", "language": "JavaScript", "kind": "function", "signature": "(url)"}, {"_type": "tag", "name": "db", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^            disabled={db.loading}$/", "language": "JavaScript", "kind": "field", "scope": "disabled", "scopeKind": "class"}, {"_type": "tag", "name": "expires_at", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^      expires_at: sess.expires_at || null,$/", "language": "JavaScript", "kind": "property", "scope": "checkAuthSession.masked", "scopeKind": "class"}, {"_type": "tag", "name": "getMaskedEnv", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^function getMaskedEnv() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "maskValue", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^function maskValue(value, visible = 4) {$/", "language": "JavaScript", "kind": "function", "signature": "(value, visible = 4)"}, {"_type": "tag", "name": "masked", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^    const masked = {$/", "language": "JavaScript", "kind": "class", "scope": "checkAuthSession", "scopeKind": "class"}, {"_type": "tag", "name": "ok", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^const Badge = ({ ok, label }) => ($/", "language": "JavaScript", "kind": "field", "scope": "Badge", "scopeKind": "class"}, {"_type": "tag", "name": "probeDatabase", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^async function probeDatabase() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "provider_token_present", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^      provider_token_present: !!sess.provider_token,$/", "language": "JavaScript", "kind": "property", "scope": "checkAuthSession.masked", "scopeKind": "class"}, {"_type": "tag", "name": "refresh_token_masked", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^      refresh_token_masked: sess.refresh_token ? maskValue(sess.refresh_token, 6) : null,$/", "language": "JavaScript", "kind": "property", "scope": "checkAuthSession.masked", "scopeKind": "class"}, {"_type": "tag", "name": "runAuthCheck", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^            onClick={runAuthCheck}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "runDbProbe", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^            onClick={runDbProbe}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "runEnvCheck", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^              onClick={runEnvCheck}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "runNetworkCheck", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^            onClick={runNetworkCheck}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^const Section = ({ title, children }) => ($/", "language": "JavaScript", "kind": "field", "scope": "Section", "scopeKind": "class"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/components/DiagnosticsPanel.js", "pattern": "/^      userId: sess.user?.id || null,$/", "language": "JavaScript", "kind": "property", "scope": "checkAuthSession.masked", "scopeKind": "class"}], "hash": "6d2fa7d68b01cb802741eb53b86348dd", "format-version": 4, "code-base-name": "lms_frontend", "filename": "lms_frontend/src/components/DiagnosticsPanel.js", "fields": [{"name": "access_token_masked: sess.access_token ? maskValue(sess.access_token, 6) : null,", "scope": "checkAuthSession.masked", "scopeKind": "class", "description": "unavailable"}, {"name": "<Badge ok={allEnvPresent} label={allEnvPresent ? 'Env OK' : 'Env Missing'} \\/>", "scope": "AnonymousClass527312710401", "scopeKind": "class", "description": "unavailable"}, {"name": "disabled={auth.loading}", "scope": "disabled", "scopeKind": "class", "description": "unavailable"}, {"name": "disabled={db.loading}", "scope": "disabled", "scopeKind": "class", "description": "unavailable"}, {"name": "expires_at: sess.expires_at || null,", "scope": "checkAuthSession.masked", "scopeKind": "class", "description": "unavailable"}, {"name": "const Badge = ({ ok, label }) => (", "scope": "Badge", "scopeKind": "class", "description": "unavailable"}, {"name": "provider_token_present: !!sess.provider_token,", "scope": "checkAuthSession.masked", "scopeKind": "class", "description": "unavailable"}, {"name": "refresh_token_masked: sess.refresh_token ? maskValue(sess.refresh_token, 6) : null,", "scope": "checkAuthSession.masked", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={runAuthCheck}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={runDbProbe}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={runEnvCheck}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={runNetworkCheck}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "const Section = ({ title, children }) => (", "scope": "Section", "scopeKind": "class", "description": "unavailable"}, {"name": "userId: sess.user?.id || null,", "scope": "checkAuthSession.masked", "scopeKind": "class", "description": "unavailable"}]}