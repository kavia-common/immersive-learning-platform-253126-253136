{"is_source_file": true, "format": "JavaScript", "description": "Source file implementing a self-test routine for Supabase integration within a React/JavaScript frontend application. It includes environment masking, lightweight table checks, session validation, and connectivity diagnostics.", "external_files": ["../config/supabaseClient", "../lib/logger"], "external_methods": ["getSupabaseClient", "logger.info", "logger.error", "logger.warn"], "published": ["runSupabaseSelfTest"], "classes": [], "methods": [{"name": "maskEnv()", "description": "Masks and summarizes environment variables related to Supabase configuration for diagnostics.", "scope": "", "scopeKind": ""}, {"name": "tryLightweightSelect(supabase)", "description": "Attempts minimal cost SELECT operations on 'profiles' and 'courses' tables to check their existence and permissions.", "scope": "", "scopeKind": ""}, {"name": "runSupabaseSelfTest()", "description": "Performs a comprehensive self-test for the Supabase setup, including env checks, session validation, minimal table access, and reporting.", "scope": "", "scopeKind": ""}], "calls": ["supabase.auth.getSession", "supabase.auth.getSettings", "supabase.from", "supabase.auth.getSession", "supabase.auth.getSettings"], "search-terms": ["Supabase self-test", "environment masking", "lightweight table check", "supabase client", "session validation", "connectivity diagnostics", "React Supabase"], "state": 2, "file_id": 66, "knowledge_revision": 191, "git_revision": "fbdf20f24805199372cde02a9b42476f0c3d4202", "revision_history": [{"180": ""}, {"191": "fbdf20f24805199372cde02a9b42476f0c3d4202"}], "ctags": [{"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^        status.details = {$/", "language": "JavaScript", "kind": "class", "scope": "status", "scopeKind": "class"}, {"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^      status.details = {$/", "language": "JavaScript", "kind": "class", "scope": "status", "scopeKind": "class"}, {"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^    details: {},$/", "language": "JavaScript", "kind": "property", "scope": "runSupabaseSelfTest.status", "scopeKind": "class"}, {"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^    status.details = { error: e?.message, env: envMask };$/", "language": "JavaScript", "kind": "class", "scope": "status", "scopeKind": "class"}, {"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^    status.details = { error: err?.message, env: envMask };$/", "language": "JavaScript", "kind": "class", "scope": "status", "scopeKind": "class"}, {"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^    status.details = {$/", "language": "JavaScript", "kind": "class", "scope": "status", "scopeKind": "class"}, {"_type": "tag", "name": "env", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^    status.details = { error: e?.message, env: envMask };$/", "language": "JavaScript", "kind": "property", "scope": "status.details", "scopeKind": "class"}, {"_type": "tag", "name": "env", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^    status.details = { error: err?.message, env: envMask };$/", "language": "JavaScript", "kind": "property", "scope": "status.details", "scopeKind": "class"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^    status.details = { error: e?.message, env: envMask };$/", "language": "JavaScript", "kind": "property", "scope": "status.details", "scopeKind": "class"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^    status.details = { error: err?.message, env: envMask };$/", "language": "JavaScript", "kind": "property", "scope": "status.details", "scopeKind": "class"}, {"_type": "tag", "name": "maskEnv", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^function maskEnv() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^    message: '',$/", "language": "JavaScript", "kind": "property", "scope": "runSupabaseSelfTest.status", "scopeKind": "class"}, {"_type": "tag", "name": "ok", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^    ok: false,$/", "language": "JavaScript", "kind": "property", "scope": "runSupabaseSelfTest.status", "scopeKind": "class"}, {"_type": "tag", "name": "runSupabaseSelfTest", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^export async function runSupabaseSelfTest() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "selectOk", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^          selectOk: false,$/", "language": "JavaScript", "kind": "property", "scope": "status.details", "scopeKind": "class"}, {"_type": "tag", "name": "selectOk", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^        selectOk: false,$/", "language": "JavaScript", "kind": "property", "scope": "status.details", "scopeKind": "class"}, {"_type": "tag", "name": "sessionPresent", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^          sessionPresent: Boolean(session),$/", "language": "JavaScript", "kind": "property", "scope": "status.details", "scopeKind": "class"}, {"_type": "tag", "name": "sessionPresent", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^        sessionPresent: Boolean(session),$/", "language": "JavaScript", "kind": "property", "scope": "status.details", "scopeKind": "class"}, {"_type": "tag", "name": "sessionPresent", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^      sessionPresent: Boolean(session),$/", "language": "JavaScript", "kind": "property", "scope": "status.details", "scopeKind": "class"}, {"_type": "tag", "name": "settingsOk", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^      settingsOk: !settingsError,$/", "language": "JavaScript", "kind": "property", "scope": "status.details", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^  const status = {$/", "language": "JavaScript", "kind": "class", "scope": "runSupabaseSelfTest", "scopeKind": "class"}, {"_type": "tag", "name": "tableProbe", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^      tableProbe: probe.details,$/", "language": "JavaScript", "kind": "property", "scope": "status.details", "scopeKind": "class"}, {"_type": "tag", "name": "tablesPresent", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^          tablesPresent: false,$/", "language": "JavaScript", "kind": "property", "scope": "status.details", "scopeKind": "class"}, {"_type": "tag", "name": "tried", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^          tried: probe.tried,$/", "language": "JavaScript", "kind": "property", "scope": "status.details", "scopeKind": "class"}, {"_type": "tag", "name": "tried", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^        tried: probe.tried,$/", "language": "JavaScript", "kind": "property", "scope": "status.details", "scopeKind": "class"}, {"_type": "tag", "name": "tryLightweightSelect", "path": "/home/kavia/workspace/code-generation/immersive-learning-platform-253126-253136/lms_frontend/src/utils/testSupabase.js", "pattern": "/^async function tryLightweightSelect(supabase) {$/", "language": "JavaScript", "kind": "function", "signature": "(supabase)"}], "hash": "7ed203920e004859dd4f6b0ab512cc52", "format-version": 4, "code-base-name": "lms_frontend", "filename": "lms_frontend/src/utils/testSupabase.js", "fields": [{"name": "details: {},", "scope": "runSupabaseSelfTest.status", "scopeKind": "class", "description": "unavailable"}, {"name": "status.details = { error: e?.message, env: envMask };", "scope": "status.details", "scopeKind": "class", "description": "unavailable"}, {"name": "status.details = { error: err?.message, env: envMask };", "scope": "status.details", "scopeKind": "class", "description": "unavailable"}, {"name": "message: '',", "scope": "runSupabaseSelfTest.status", "scopeKind": "class", "description": "unavailable"}, {"name": "ok: false,", "scope": "runSupabaseSelfTest.status", "scopeKind": "class", "description": "unavailable"}, {"name": "selectOk: false,", "scope": "status.details", "scopeKind": "class", "description": "unavailable"}, {"name": "sessionPresent: Boolean(session),", "scope": "status.details", "scopeKind": "class", "description": "unavailable"}, {"name": "settingsOk: !settingsError,", "scope": "status.details", "scopeKind": "class", "description": "unavailable"}, {"name": "tableProbe: probe.details,", "scope": "status.details", "scopeKind": "class", "description": "unavailable"}, {"name": "tablesPresent: false,", "scope": "status.details", "scopeKind": "class", "description": "unavailable"}, {"name": "tried: probe.tried,", "scope": "status.details", "scopeKind": "class", "description": "unavailable"}]}